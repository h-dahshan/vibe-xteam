echo "\033[1m\033[1;33m⚡️  pre-push hook running  ⚡️\033[0m"

### check which branch
branch=$(git symbolic-ref --short HEAD)
if [[ "$branch" == "main" ]]; then
  echo "Please, don't directly push to main branch!"
  exit 1
fi
### run build
pnpm build
### run tests
pnpm test
pnpm test:e2e
### check for console logs
grep -R "console\.log" ./**/apps/src ./packages/**/src && echo "Remove console.log!" && exit 1 || echo "No console.log found."
